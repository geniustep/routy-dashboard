# ุฏููู ุญู ูุดููุฉ ุชููู ุงูุณูุฑูุฑ ุฃุซูุงุก ุงูุจูุงุก

## ุงููุดููุฉ
ุงูุณูุฑูุฑ ูุชููู ุนูุฏ ูุฑุญูุฉ `RUN NODE_OPTIONS=--max-old-space-size=4096 npm run build` ูู Docker.

## ุงูุญููู ุงููุชุงุญุฉ

### โ ุงูุญู ุงูุฃูู: ุงูุจูุงุก ุงููุญูู ุซู ุงููุดุฑ (ุงูุฃุณุฑุน ูุงูุฃูุถู)

**ุงููููุฒุงุช:**
- โก ุฃุณุฑุน ุจูุซูุฑ (ูุง ูููู ุงูุณูุฑูุฑ)
- ๐พ ูุง ูุณุชููู ุฐุงูุฑุฉ Docker
- ๐ ููููู ูุชุงุจุนุฉ ุงูุนูู ุฃุซูุงุก ุงูุจูุงุก

**ุงูุงุณุชุฎุฏุงู:**
```bash
cd /opt/routy_dashboard
./build-and-deploy.sh
```

**ูุง ููุนูู ุงูุณูุฑูุจุช:**
1. ูุจูู ุงููุดุฑูุน ูุญููุงู (ุฃุณุฑุน)
2. ููุดุฆ ุตูุฑุฉ Docker ูู `dist` ุงููุจููุฉ
3. ูููู ุงูุญุงููุฉ ุงููุฏููุฉ
4. ูุดุบู ุงูุญุงููุฉ ุงูุฌุฏูุฏุฉ

---

### โ ุงูุญู ุงูุซุงูู: ุงุณุชุฎุฏุงู Dockerfile ุงููุญุณูู

ุชู ุชุญุณูู `Dockerfile` ุงูุฃุตูู ููููู ุฃูุซุฑ ููุงุกุฉ:

```bash
cd /opt/routy_dashboard
docker compose up -d --build
```

**ุงูุชุญุณููุงุช:**
- ุฅุถุงูุฉ cache layers
- ุชุญุณูู ุชุฑุชูุจ ุงูุฃูุงูุฑ
- retry mechanism ุนูุฏ ูุดู ุงูุจูุงุก

---

### โ ุงูุญู ุงูุซุงูุซ: ุงูุจูุงุก ุงููุฏูู

```bash
# 1. ุจูุงุก ุงููุดุฑูุน ูุญููุงู
cd /opt/routy_dashboard
NODE_OPTIONS=--max-old-space-size=4096 npm run build

# 2. ุจูุงุก Docker image ูู dist
docker build -f Dockerfile.quick -t routy_dashboard-routy-dashboard:latest .

# 3. ุฅููุงู ุงูุญุงููุฉ ุงููุฏููุฉ
docker compose stop routy-dashboard

# 4. ุชุดุบูู ุงูุญุงููุฉ ุงูุฌุฏูุฏุฉ
docker compose -f docker-compose.quick.yml up -d
```

---

## ููุงุฑูุฉ ุงูุทุฑู

| ุงูุทุฑููุฉ | ุงูุณุฑุนุฉ | ุงุณุชููุงู ุงูุฐุงูุฑุฉ | ุณูููุฉ ุงูุงุณุชุฎุฏุงู |
|---------|--------|-----------------|-----------------|
| ุงูุจูุงุก ุงููุญูู | โกโกโก | ๐พ ููุฎูุถ | โญโญโญ |
| Dockerfile ุงููุญุณูู | โกโก | ๐พ๐พ ูุชูุณุท | โญโญ |
| ุงูุจูุงุก ุงููุฏูู | โกโกโก | ๐พ ููุฎูุถ | โญ |

---

## ูุตุงุฆุญ ุฅุถุงููุฉ

### 1. ุฒูุงุฏุฉ ุฐุงูุฑุฉ Docker (ุฅุฐุง ูุฒู ุงูุฃูุฑ)

```bash
# ูู /etc/docker/daemon.json
{
  "default-ulimits": {
    "memlock": {
      "hard": -1,
      "soft": -1
    }
  }
}
```

### 2. ุงุณุชุฎุฏุงู BuildKit

```bash
DOCKER_BUILDKIT=1 docker compose build
```

### 3. ุชูุธูู Docker Cache

```bash
docker builder prune
docker system prune -a
```

---

## ุงููููุงุช ุงูุฌุฏูุฏุฉ

- `build-and-deploy.sh` - ุณูุฑูุจุช ุงูุจูุงุก ุงูุณุฑูุน
- `Dockerfile.quick` - Dockerfile ููุจูุงุก ุงูุณุฑูุน
- `docker-compose.quick.yml` - ุฅุนุฏุงุฏุงุช docker-compose ููุจูุงุก ุงูุณุฑูุน

---

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฎุทุฃ: "dist directory not found"
**ุงูุญู**: ุชุฃูุฏ ูู ุชุดุบูู `npm run build` ุฃููุงู

### ุฎุทุฃ: "Build failed"
**ุงูุญู**: 
- ุชุญูู ูู ุงูุฃุฎุทุงุก ูู console
- ุชุฃูุฏ ูู ูุฌูุฏ ุฌููุน dependencies
- ุฌุฑุจ `npm install` ุซู `npm run build`

### ุฎุทุฃ: "Out of memory"
**ุงูุญู**:
- ุงุณุชุฎุฏู `build-and-deploy.sh` (ูุจูู ูุญููุงู)
- ุฃู ุฒุฏ ุงูุฐุงูุฑุฉ: `NODE_OPTIONS=--max-old-space-size=6144`

---

## ุงูุชูุตูุฉ

**ุงุณุชุฎุฏู `build-and-deploy.sh`** - ุฅูู ุงูุฃุณุฑุน ูุงูุฃูุซุฑ ููุซูููุฉ! ๐

